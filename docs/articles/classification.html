<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classification by Tour • loon.tourr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Classification by Tour">
<meta property="og:description" content="loon.tourr">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">loon.tourr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/classification.html">Classification by Tour</a>
    </li>
    <li>
      <a href="../articles/tours.html">Tour in Loon</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/z267xu/loon.tourr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="classification_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Classification by Tour</h1>
                        <h4 class="author">Wayne Oldford and Zehao Xu</h4>
            
            <h4 class="date">2021-09-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/z267xu/loon.tourr/blob/master/vignettes/classification.Rmd"><code>vignettes/classification.Rmd</code></a></small>
      <div class="hidden name"><code>classification.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>A grand tour “method” is an algorithm for assigning a sequence of projections onto a lower dimensional spaces. After the original multivariate dataset is projected onto some “interesting” plane, a question may be raised here, “what’s next?”</p>
<p>Well, one of the usage could be in “classification.” Rather than putting the original data set into the classifier. Controlling other hyper-parameters, can an interesting projection improve the performance of the prediction? In this vignette, we will learn about it.</p>
</div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor"></a>Data</h2>
<p>The data set <code>olive</code> records the percentage composition of 8 fatty acids (<code>palmitic</code>, <code>palmitoleic</code>, <code>stearic</code> and etc) found in the lipid fraction of 572 Italian olive oils. The oils are samples taken from three Italian regions varying number of areas within each region. The regions and their areas are recorded as shown in the following table <span class="citation">(<a href="#ref-loon" role="doc-biblioref">Waddell and Oldford 2020</a>)</span>:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Region</th>
<th align="left">Area</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">North</td>
<td align="left">North-Apulia, South-Apulia, Calabria, Sicily</td>
</tr>
<tr class="even">
<td align="left">South</td>
<td align="left">East-Liguria, West-Liguria, Umbria</td>
</tr>
<tr class="odd">
<td align="left">Sardinia</td>
<td align="left">Coastal-Sardinia, Inland-Sardinia</td>
</tr>
</tbody>
</table>
<p>First, we randomly select 80% as the training set and leave the rest 20% as the test set.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
<span class="va">N</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">olive</span><span class="op">)</span>
<span class="va">trainId</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>, 
                  size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="fl">0.8</span> <span class="op">*</span> <span class="va">N</span><span class="op">)</span><span class="op">)</span>
<span class="va">testId</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>, <span class="va">trainId</span><span class="op">)</span>
<span class="va">acids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">olive</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"region"</span>, <span class="st">"area"</span><span class="op">)</span><span class="op">)</span>
<span class="va">trainX</span> <span class="op">&lt;-</span> <span class="va">olive</span><span class="op">[</span><span class="va">trainId</span>, <span class="va">acids</span><span class="op">]</span>
<span class="va">testX</span> <span class="op">&lt;-</span> <span class="va">olive</span><span class="op">[</span><span class="va">testId</span>, <span class="va">acids</span><span class="op">]</span>
<span class="va">trainY</span> <span class="op">&lt;-</span> <span class="va">olive</span><span class="op">[</span><span class="va">trainId</span>, <span class="st">"region"</span><span class="op">]</span>
<span class="va">testY</span> <span class="op">&lt;-</span> <span class="va">olive</span><span class="op">[</span><span class="va">testId</span>, <span class="st">"region"</span><span class="op">]</span></code></pre></div>
<p>Then, as the magnitude of each variable is very different, to avoid one specific factor dominate the projection, a scaling technique would be provided. In our case, the <code>variable</code> scaling method is applied that each variable is scaled to zero one (the detailed description of different scaling methods can be found in <code>l_tour</code> documentation <code><a href="../reference/l_tour.html">help("l_tour")</a></code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">trainX</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
<span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">trainX</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">palmitic</th>
<th align="right">palmitoleic</th>
<th align="right">stearic</th>
<th align="right">oleic</th>
<th align="right">linoleic</th>
<th align="right">linolenic</th>
<th align="right">arachidic</th>
<th align="right">eicosenoic</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1141</td>
<td align="right">95</td>
<td align="right">250</td>
<td align="right">7035</td>
<td align="right">1388</td>
<td align="right">22</td>
<td align="right">68</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">1105</td>
<td align="right">30</td>
<td align="right">198</td>
<td align="right">7995</td>
<td align="right">570</td>
<td align="right">52</td>
<td align="right">20</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">1307</td>
<td align="right">197</td>
<td align="right">238</td>
<td align="right">7003</td>
<td align="right">1144</td>
<td align="right">37</td>
<td align="right">50</td>
<td align="right">24</td>
</tr>
<tr class="even">
<td align="right">1070</td>
<td align="right">120</td>
<td align="right">210</td>
<td align="right">7600</td>
<td align="right">990</td>
<td align="right">0</td>
<td align="right">10</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="right">1347</td>
<td align="right">197</td>
<td align="right">211</td>
<td align="right">6795</td>
<td align="right">1300</td>
<td align="right">32</td>
<td align="right">59</td>
<td align="right">34</td>
</tr>
<tr class="even">
<td align="right">1368</td>
<td align="right">171</td>
<td align="right">218</td>
<td align="right">7010</td>
<td align="right">1057</td>
<td align="right">41</td>
<td align="right">54</td>
<td align="right">26</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">scalingTrainX</span> <span class="op">&lt;-</span> <span class="fu">loon</span><span class="fu">::</span><span class="fu"><a href="https://great-northern-diver.github.io/loon/reference/l_getScaledData.html">l_getScaledData</a></span><span class="op">(</span><span class="va">trainX</span>, scaling <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span>
<span class="va">scalingTestX</span> <span class="op">&lt;-</span> <span class="fu">loon</span><span class="fu">::</span><span class="fu"><a href="https://great-northern-diver.github.io/loon/reference/l_getScaledData.html">l_getScaledData</a></span><span class="op">(</span><span class="va">testX</span>, scaling <span class="op">=</span> <span class="st">"variable"</span><span class="op">)</span>
<span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">scalingTrainX</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">palmitic</th>
<th align="right">palmitoleic</th>
<th align="right">stearic</th>
<th align="right">oleic</th>
<th align="right">linoleic</th>
<th align="right">linolenic</th>
<th align="right">arachidic</th>
<th align="right">eicosenoic</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0.30</td>
<td align="right">0.30</td>
<td align="right">0.43</td>
<td align="right">0.41</td>
<td align="right">0.92</td>
<td align="right">0.31</td>
<td align="right">0.65</td>
<td align="right">0.02</td>
</tr>
<tr class="even">
<td align="right">0.26</td>
<td align="right">0.06</td>
<td align="right">0.19</td>
<td align="right">0.93</td>
<td align="right">0.12</td>
<td align="right">0.74</td>
<td align="right">0.19</td>
<td align="right">0.04</td>
</tr>
<tr class="odd">
<td align="right">0.49</td>
<td align="right">0.69</td>
<td align="right">0.37</td>
<td align="right">0.39</td>
<td align="right">0.68</td>
<td align="right">0.53</td>
<td align="right">0.48</td>
<td align="right">0.40</td>
</tr>
<tr class="even">
<td align="right">0.22</td>
<td align="right">0.40</td>
<td align="right">0.25</td>
<td align="right">0.72</td>
<td align="right">0.53</td>
<td align="right">0.00</td>
<td align="right">0.10</td>
<td align="right">0.04</td>
</tr>
<tr class="odd">
<td align="right">0.54</td>
<td align="right">0.69</td>
<td align="right">0.25</td>
<td align="right">0.27</td>
<td align="right">0.83</td>
<td align="right">0.46</td>
<td align="right">0.56</td>
<td align="right">0.58</td>
</tr>
<tr class="even">
<td align="right">0.56</td>
<td align="right">0.59</td>
<td align="right">0.28</td>
<td align="right">0.39</td>
<td align="right">0.60</td>
<td align="right">0.59</td>
<td align="right">0.51</td>
<td align="right">0.44</td>
</tr>
</tbody>
</table>
</div>
<div id="projection-methods" class="section level2">
<h2 class="hasAnchor">
<a href="#projection-methods" class="anchor"></a>Projection Methods</h2>
<p>The classifier we used in this vignette is k-nearest neighborhood, <code>knn</code> <span class="citation">(<a href="#ref-altman1992introduction" role="doc-biblioref">Altman 1992</a>)</span>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">knn_pred</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">trainX</span>, <span class="va">trainY</span>, <span class="va">testX</span>, <span class="va">testY</span>, <span class="va">k</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">len_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">testY</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">vapply</a></span><span class="op">(</span><span class="va">k</span>,
         <span class="kw">function</span><span class="op">(</span><span class="va">num</span><span class="op">)</span> <span class="op">{</span>
           <span class="va">yhat</span> <span class="op">&lt;-</span> <span class="fu">class</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/class/man/knn.html">knn</a></span><span class="op">(</span><span class="va">trainX</span>, <span class="va">testX</span>, <span class="va">trainY</span>, k <span class="op">=</span> <span class="va">num</span><span class="op">)</span>
           <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">yhat</span> <span class="op">==</span> <span class="va">testY</span><span class="op">)</span><span class="op">/</span><span class="va">len_test</span>
         <span class="op">}</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">numeric</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span><span class="op">)</span>
  
<span class="op">}</span>

<span class="va">low_dim_knn_pred</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dims</span> <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span>, <span class="va">fun</span>, 
                             <span class="va">trainX</span>, <span class="va">trainY</span>, <span class="va">testX</span>, <span class="va">testY</span>, 
                             <span class="va">k</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>, <span class="va">setNames</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">dims</span>, 
                <span class="kw">function</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">{</span>
                  <span class="fu">knn_pred</span><span class="op">(</span>
                    <span class="fu">fun</span><span class="op">(</span><span class="va">trainX</span>, <span class="va">d</span><span class="op">)</span>, <span class="va">trainY</span>,
                    <span class="fu">fun</span><span class="op">(</span><span class="va">testX</span>, <span class="va">d</span><span class="op">)</span>, <span class="va">testY</span>
                  <span class="op">)</span>
                <span class="op">}</span><span class="op">)</span> <span class="op">%&gt;%</span> 
    <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span>
  
  <span class="kw">if</span><span class="op">(</span><span class="va">setNames</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">tab</span> <span class="op">&lt;-</span> <span class="va">tab</span> <span class="op">%&gt;%</span>
      <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span>nm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"d = "</span>, <span class="va">dims</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">tab</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"k = "</span>, <span class="va">k</span><span class="op">)</span>
  <span class="va">tab</span>
<span class="op">}</span></code></pre></div>
<div id="method-i-p-choose-k" class="section level3">
<h3 class="hasAnchor">
<a href="#method-i-p-choose-k" class="anchor"></a>Method I: p choose k</h3>
<p>The most basic projection is that to choose <span class="math inline">\(d\)</span> dimensional subspace from the <span class="math inline">\(p\)</span> dimensional space. Since we have 8 dimensions, suppose <span class="math inline">\(d = 2\)</span>, there are <span class="math inline">\({8 \choose 2} = 28\)</span> combinations. To simplify the process, with each pair, we will only extract the highest prediction accuracy one.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># the number of k</span>
<span class="va">dims</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">:</span><span class="fl">5</span>
<span class="va">var_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">scalingTrainX</span><span class="op">)</span>
<span class="va">low_dim_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">K</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">trainX</span><span class="op">)</span>
<span class="va">pChooseD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">dims</span>, 
                   <span class="kw">function</span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">{</span>
                     <span class="va">com</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/combn.html">combn</a></span><span class="op">(</span><span class="va">K</span>, <span class="va">d</span><span class="op">)</span>
                     <span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">com</span>, <span class="fl">2</span>, 
                                   <span class="kw">function</span><span class="op">(</span><span class="va">pair</span><span class="op">)</span> <span class="op">{</span>
                                     <span class="fu">knn_pred</span><span class="op">(</span><span class="va">trainX</span><span class="op">[</span>, <span class="va">pair</span><span class="op">]</span>, <span class="va">trainY</span>, 
                                              <span class="va">testX</span><span class="op">[</span>, <span class="va">pair</span><span class="op">]</span>, <span class="va">testY</span><span class="op">)</span>
                                   <span class="op">}</span><span class="op">)</span>
                     <span class="va">mean_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">pred</span>, <span class="fl">2</span>, <span class="va">mean</span><span class="op">)</span>
                     <span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="va">mean_pred</span><span class="op">)</span>
                     <span class="va">low_dim_names</span> <span class="op">&lt;&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">low_dim_names</span>, 
                                         <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">var_names</span><span class="op">[</span><span class="va">com</span><span class="op">[</span>, <span class="va">id</span><span class="op">]</span><span class="op">]</span>, 
                                               collapse <span class="op">=</span> <span class="st">":"</span><span class="op">)</span><span class="op">)</span>
                     <span class="va">pred</span><span class="op">[</span>, <span class="va">id</span><span class="op">]</span>
                   <span class="op">}</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">as_tibble</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span>nm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"d = "</span>, <span class="va">dims</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">pChooseD</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"k = "</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The best pair’s name is</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">low_dim_names</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"d = "</span>, <span class="va">dims</span><span class="op">)</span>
<span class="va">low_dim_names</span>
<span class="co">#&gt;                                             d = 2 </span>
<span class="co">#&gt;                             "linoleic:eicosenoic" </span>
<span class="co">#&gt;                                             d = 3 </span>
<span class="co">#&gt;                   "linoleic:arachidic:eicosenoic" </span>
<span class="co">#&gt;                                             d = 4 </span>
<span class="co">#&gt;         "linoleic:linolenic:arachidic:eicosenoic" </span>
<span class="co">#&gt;                                             d = 5 </span>
<span class="co">#&gt; "stearic:linoleic:linolenic:arachidic:eicosenoic"</span></code></pre></div>
<p>The prediction accuracy is</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">kable</span><span class="op">(</span><span class="va">pChooseD</span>, row.names <span class="op">=</span> <span class="cn">TRUE</span>,
      digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">d = 2</th>
<th align="right">d = 3</th>
<th align="right">d = 4</th>
<th align="right">d = 5</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">k = 5</td>
<td align="right">0.974</td>
<td align="right">0.983</td>
<td align="right">0.991</td>
<td align="right">0.991</td>
</tr>
<tr class="even">
<td align="left">k = 10</td>
<td align="right">0.930</td>
<td align="right">0.957</td>
<td align="right">0.974</td>
<td align="right">0.974</td>
</tr>
<tr class="odd">
<td align="left">k = 20</td>
<td align="right">0.852</td>
<td align="right">0.922</td>
<td align="right">0.913</td>
<td align="right">0.939</td>
</tr>
</tbody>
</table>
</div>
<div id="method-ii-pca" class="section level3">
<h3 class="hasAnchor">
<a href="#method-ii-pca" class="anchor"></a>Method II: PCA</h3>
<p>PCA is defined as an orthogonal linear transformation that transforms the data to a new coordinate system such that the greatest variance by some scalar projection of the data comes to lie on the first coordinate (called the first principal component, determined by the largest eigen value), the second greatest variance (the second largest eigen value) on the second coordinate, and so on.</p>
<p>The eigen values of PCA projection on our data set is</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">trainXPCA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/princomp.html">princomp</a></span><span class="op">(</span><span class="va">scalingTrainX</span><span class="op">)</span>
<span class="va">testXPCA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/princomp.html">princomp</a></span><span class="op">(</span><span class="va">scalingTestX</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">trainXPCA</span><span class="op">$</span><span class="va">sdev</span>, <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; Comp.1 Comp.2 Comp.3 Comp.4 Comp.5 Comp.6 Comp.7 Comp.8 </span>
<span class="co">#&gt;   0.41   0.28   0.20   0.17   0.13   0.10   0.06   0.01</span></code></pre></div>
<p>The first 5 eigen values are picked, as the sum of them is above 85%.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">PCA</span> <span class="op">&lt;-</span> <span class="fu">low_dim_knn_pred</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span>, 
                        fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">princomp</span>, <span class="va">d</span><span class="op">)</span> 
                          <span class="op">{</span><span class="va">princomp</span><span class="op">$</span><span class="va">scores</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">]</span><span class="op">}</span>,
                        <span class="va">trainXPCA</span>,
                        <span class="va">trainY</span>,
                        <span class="va">testXPCA</span>,
                        <span class="va">testY</span><span class="op">)</span>
<span class="fu">kable</span><span class="op">(</span><span class="va">PCA</span>, row.names <span class="op">=</span> <span class="cn">TRUE</span>,
      digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">d = 2</th>
<th align="right">d = 3</th>
<th align="right">d = 4</th>
<th align="right">d = 5</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">k = 5</td>
<td align="right">0.678</td>
<td align="right">0.678</td>
<td align="right">0.687</td>
<td align="right">0.791</td>
</tr>
<tr class="even">
<td align="left">k = 10</td>
<td align="right">0.670</td>
<td align="right">0.696</td>
<td align="right">0.704</td>
<td align="right">0.800</td>
</tr>
<tr class="odd">
<td align="left">k = 20</td>
<td align="right">0.670</td>
<td align="right">0.722</td>
<td align="right">0.722</td>
<td align="right">0.809</td>
</tr>
</tbody>
</table>
</div>
<div id="method-iii-lle" class="section level3">
<h3 class="hasAnchor">
<a href="#method-iii-lle" class="anchor"></a>Method III: LLE</h3>
<p>LLE (Local Linear Embedding) <span class="citation">(<a href="#ref-roweis2000nonlinear" role="doc-biblioref">Roweis and Saul 2000</a>)</span> begins by finding a set of the nearest neighbors of each point, then computes a set of weights for each point that best describes the point as a linear combination of its neighbors. Finally, it uses an eigenvector-based optimization technique to find the low-dimensional embedding of points.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">RDRToolbox</span><span class="op">)</span>
<span class="va">lle</span> <span class="op">&lt;-</span> <span class="fu">low_dim_knn_pred</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span>, 
                        fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">d</span><span class="op">)</span> <span class="op">{</span>
                          <span class="fu"><a href="https://rdrr.io/pkg/RDRToolbox/man/LLE.html">LLE</a></span><span class="op">(</span><span class="va">data</span>, dim <span class="op">=</span> <span class="va">d</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
                        <span class="op">}</span>,
                        <span class="va">scalingTrainX</span>, <span class="va">trainY</span>,
                        <span class="va">scalingTestX</span>, <span class="va">testY</span><span class="op">)</span> 
<span class="fu">kable</span><span class="op">(</span><span class="va">lle</span>, row.names <span class="op">=</span> <span class="cn">TRUE</span>,
      digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">d = 2</th>
<th align="right">d = 3</th>
<th align="right">d = 4</th>
<th align="right">d = 5</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">k = 5</td>
<td align="right">0.852</td>
<td align="right">0.304</td>
<td align="right">0.652</td>
<td align="right">0.652</td>
</tr>
<tr class="even">
<td align="left">k = 10</td>
<td align="right">0.852</td>
<td align="right">0.165</td>
<td align="right">0.730</td>
<td align="right">0.722</td>
</tr>
<tr class="odd">
<td align="left">k = 20</td>
<td align="right">0.852</td>
<td align="right">0.165</td>
<td align="right">0.730</td>
<td align="right">0.661</td>
</tr>
</tbody>
</table>
</div>
<div id="method-iv-random-tour" class="section level3">
<h3 class="hasAnchor">
<a href="#method-iv-random-tour" class="anchor"></a>Method IV: Random Tour</h3>
<p>A simple call <code>l_tour</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/l_tour.html">l_tour</a></span><span class="op">(</span><span class="va">scalingTrainX</span>, color <span class="op">=</span> <span class="va">trainY</span><span class="op">)</span>
<span class="va">l</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/l_layer_hull.html">l_layer_hull</a></span><span class="op">(</span><span class="va">p2</span>, group <span class="op">=</span> <span class="va">trainY</span><span class="op">)</span></code></pre></div>
<p>Here, we assign different groups different colors. Besides, a convex hull is constructed (<code>l_layer_hull</code>) so that the separation of each group is much easier to tell. As we scroll the bar, one random projection can split the groups well (no intersections among the hulls).</p>
<p><img src="images/classification/proj2D.PNG" width="70%" style="display: block; margin: auto;"></p>
<p>The matrix of projection vectors is</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">proj2D</span> <span class="op">&lt;-</span> <span class="va">p2</span><span class="op">[</span><span class="st">"projection"</span><span class="op">]</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">V1</th>
<th align="right">V2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">palmitic</td>
<td align="right">0.01</td>
<td align="right">-0.22</td>
</tr>
<tr class="even">
<td align="left">palmitoleic</td>
<td align="right">0.34</td>
<td align="right">-0.31</td>
</tr>
<tr class="odd">
<td align="left">stearic</td>
<td align="right">0.27</td>
<td align="right">-0.19</td>
</tr>
<tr class="even">
<td align="left">oleic</td>
<td align="right">0.66</td>
<td align="right">0.15</td>
</tr>
<tr class="odd">
<td align="left">linoleic</td>
<td align="right">-0.38</td>
<td align="right">-0.52</td>
</tr>
<tr class="even">
<td align="left">linolenic</td>
<td align="right">0.15</td>
<td align="right">0.16</td>
</tr>
<tr class="odd">
<td align="left">arachidic</td>
<td align="right">-0.20</td>
<td align="right">-0.37</td>
</tr>
<tr class="even">
<td align="left">eicosenoic</td>
<td align="right">0.40</td>
<td align="right">-0.60</td>
</tr>
</tbody>
</table>
<p>Then, we will create 3, 4 and 5 dimension tour paths (by modifying <code>tour_path</code>). The “interesting” projection could be that, on at least one axis, the three groups are split well. For example, in this 3D projection, at the axis V1, the group “gray” is distinguished from the team; at the axis V2, the group “pink” could be told significantly different from the rest; at the axis V3, the “blue” group is popped up.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/l_tour.html">l_tour</a></span><span class="op">(</span><span class="va">scalingTrainX</span>, 
             tour_path <span class="op">=</span> <span class="fu">tourr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tourr/man/grand_tour.html">grand_tour</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>,
             color <span class="op">=</span> <span class="va">trainY</span>,
             axesLayout <span class="op">=</span> <span class="st">"parallel"</span><span class="op">)</span>
<span class="va">proj3D</span> <span class="op">&lt;-</span> <span class="va">p3</span><span class="op">[</span><span class="st">"projection"</span><span class="op">]</span></code></pre></div>
<p><img src="images/classification/proj3D.PNG" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/l_tour.html">l_tour</a></span><span class="op">(</span><span class="va">scalingTrainX</span>,
             tour_path <span class="op">=</span> <span class="fu">tourr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tourr/man/grand_tour.html">grand_tour</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span>,
             color <span class="op">=</span> <span class="va">trainY</span>,
             axesLayout <span class="op">=</span> <span class="st">"parallel"</span><span class="op">)</span>
<span class="va">proj4D</span> <span class="op">&lt;-</span> <span class="va">p4</span><span class="op">[</span><span class="st">"projection"</span><span class="op">]</span></code></pre></div>
<p><img src="images/classification/proj4D.PNG" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/l_tour.html">l_tour</a></span><span class="op">(</span><span class="va">scalingTrainX</span>, 
             tour_path <span class="op">=</span> <span class="fu">tourr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tourr/man/grand_tour.html">grand_tour</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,
             color <span class="op">=</span> <span class="va">trainY</span>,
             axesLayout <span class="op">=</span> <span class="st">"parallel"</span><span class="op">)</span>
<span class="va">proj5D</span> <span class="op">&lt;-</span> <span class="va">p5</span><span class="op">[</span><span class="st">"projection"</span><span class="op">]</span></code></pre></div>
<p><img src="images/classification/proj5D.PNG" width="70%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tour</span> <span class="op">&lt;-</span> <span class="fu">low_dim_knn_pred</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">proj2D</span>, <span class="va">proj3D</span>, 
                              <span class="va">proj4D</span>, <span class="va">proj5D</span><span class="op">)</span>, 
                         fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span>, <span class="va">proj</span><span class="op">)</span> <span class="op">{</span>
                           <span class="va">data</span> <span class="op">%*%</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">as.matrix</a></span><span class="op">(</span><span class="va">proj</span><span class="op">)</span>
                         <span class="op">}</span>,
                         <span class="va">scalingTrainX</span>, <span class="va">trainY</span>,
                         <span class="va">scalingTestX</span>, <span class="va">testY</span>,
                         setNames <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">tour</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"d = "</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="fu">kable</span><span class="op">(</span><span class="va">tour</span>, row.names <span class="op">=</span> <span class="cn">TRUE</span>,
      digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">d = 2</th>
<th align="right">d = 3</th>
<th align="right">d = 4</th>
<th align="right">d = 5</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">k = 5</td>
<td align="right">0.974</td>
<td align="right">0.974</td>
<td align="right">0.983</td>
<td align="right">0.991</td>
</tr>
<tr class="even">
<td align="left">k = 10</td>
<td align="right">0.983</td>
<td align="right">1.000</td>
<td align="right">0.991</td>
<td align="right">0.991</td>
</tr>
<tr class="odd">
<td align="left">k = 20</td>
<td align="right">0.983</td>
<td align="right">1.000</td>
<td align="right">0.991</td>
<td align="right">0.983</td>
</tr>
</tbody>
</table>
<p>However, sometimes, it is not possible to find a matrix of projection vectors to separate each group perfectly. We need a tool to monitor the classification performance of each projection. A powerful function <code><a href="https://great-northern-diver.github.io/loon/reference/l_bind_state.html">loon::l_bind_state()</a></code> could be used. It takes three arguments, <code>target</code>, <code>event</code> and a <code>callback</code> function. If changes are detected for the given event of this target, the <code>callback</code> function will be fired. In our case, <em>suppose it is very difficult to separate the 5D tour</em>, a callback function could be built as</p>
<p>As one scrolls the bar, the accuracy rates of each projection will be displayed in the console. The performance of each projection can be visualized very straightforward. In our scenario, the most “interesting” matrix of projection vectors should be corresponding to the highest accuracy rate.</p>
<p>================= R console =================</p>
<p>&gt; …</p>
<p>&gt; k = 5: accuracy rate 0.991</p>
<p>&gt; k = 10: accuracy rate 0.991</p>
<p>&gt; k = 20: accuracy rate 0.991</p>
<p>&gt; k = 5: accuracy rate 1</p>
<p>&gt; k = 10: accuracy rate 1</p>
<p>&gt; k = 20: accuracy rate 1</p>
<p>&gt; …</p>
<p>============================================</p>
</div>
</div>
<div id="graphical-summaries" class="section level2">
<h2 class="hasAnchor">
<a href="#graphical-summaries" class="anchor"></a>Graphical Summaries</h2>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">tour</span>, <span class="va">lle</span>, <span class="va">PCA</span>, <span class="va">pChooseD</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">mutate</span><span class="op">(</span>k <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">20</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>,
         method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tour"</span>, <span class="st">"LLE"</span>, <span class="st">"PCA"</span>, <span class="st">"pChooseD"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">k</span>, <span class="va">method</span><span class="op">)</span>,
               names_to <span class="op">=</span> <span class="st">"Dimensions"</span>,
               values_to <span class="op">=</span> <span class="st">"Accuracy"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>Dimensions <span class="op">=</span> <span class="fu">parse_number</span><span class="op">(</span><span class="va">Dimensions</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Dimensions</span>, 
                       y <span class="op">=</span> <span class="va">Accuracy</span>,
                       colour <span class="op">=</span> <span class="va">method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">geom_path</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">k</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Facet by the number of neibourhoods"</span><span class="op">)</span></code></pre></div>
<p><img src="classification_files/figure-html/graphical%20summary-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>Through this chart we can tell,</p>
<ul>
<li><p>In general, <code>tour</code> has the best performance. The accuracy of three dimensional tour with 10 or 20 neighbors can be 100%!</p></li>
<li><p><code>LLE</code> has a good prediction as <code>d = 2</code>, nevertheless, as the dimension rises, the performance is worse than that of <code>PCA</code>.</p></li>
<li><p><code>PCA</code> is has a clear monotone increase trend. The more dimensions it included, the more accuracy it could provide.</p></li>
</ul>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<div id="pros" class="section level3">
<h3 class="hasAnchor">
<a href="#pros" class="anchor"></a>Pros</h3>
<p>In this data set, <code>tour</code> gives the best performance. Even in two dimensional space, the accuracy could be as high as <strong>98.3%</strong>. Also, such process is very intuitive.</p>
<p>The <code>loon.tourr</code> also provides several scaling methods, like <code>data</code> (scale to zero one based on the whole data set), <code>variable</code> (scale to zero one based on per column), <code>observation</code> (scale to zero one based on pre row), <code>sphere</code> (PCA). Additionally, users can customize their own scaling methods.</p>
</div>
<div id="cons" class="section level3">
<h3 class="hasAnchor">
<a href="#cons" class="anchor"></a>Cons</h3>
<ul>
<li><p>The process is hard to reproduce. As the projection is randomly generated, it is very arbitrary to find a good projection. Alternatively, <em>refresh</em> button is provided. If none of the existing projections is “interesting.” Press the <em>refresh</em> button and new random projections are created instantaneously.</p></li>
<li><p>Computing speed. If the number of observations is large (say 10,000), as we scroll the bar, the points are not rotated smoothly that may affect our identification.</p></li>
<li><p>The difficulty of looking for an interesting projection is positively correlated with the number of groups.</p></li>
<li><p>The projection is hard to interpret.</p></li>
</ul>
</div>
</div>
<div id="reference" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#reference" class="anchor"></a>Reference</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-altman1992introduction" class="csl-entry">
Altman, Naomi S. 1992. <span>“An Introduction to Kernel and Nearest-Neighbor Nonparametric Regression.”</span> <em>The American Statistician</em> 46 (3): 175–85.
</div>
<div id="ref-roweis2000nonlinear" class="csl-entry">
Roweis, Sam T, and Lawrence K Saul. 2000. <span>“Nonlinear Dimensionality Reduction by Locally Linear Embedding.”</span> <em>Science</em> 290 (5500): 2323–26.
</div>
<div id="ref-loon" class="csl-entry">
Waddell, Adrian, and R. Wayne Oldford. 2020. <em>Loon: Interactive Statistical Data Visualization</em>. <a href="https://great-northern-diver.github.io/loon/">https://great-northern-diver.github.io/loon/</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Zehao Xu, R. Wayne Oldford.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
